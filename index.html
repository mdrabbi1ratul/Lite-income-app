<!DOCTYPE html>    <html lang="bn">    
<head>    
    <meta charset="UTF-8">    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">    
    <title>Lite Income - Premium Edition</title>  
    <script src="https://telegram.org/js/telegram-web-app.js"></script>  
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>  
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>  
    <script src='//libtl.com/sdk.js' data-zone='10411839' data-sdk='show_10411839'></script>

<style>  
    /* ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶∞‡¶ø‡¶ú‡¶ø‡¶®‡¶æ‡¶≤ ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶™‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶ü ‡¶ì ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶π‡ßÅ‡¶¨‡¶π‡ßÅ ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá */
    :root { 
        --primary-glow: #00d2ff;
        --secondary-glow: #3a7bd5;
        --dark-bg: #0d111b; 
        --card-bg: #1a2233; 
        --text-white: #f0f4f8; 
        --accent-red: #ff4b2b; 
        --success-green: #00f2fe; 
        --warning-yellow: #f9d423; 
        --nav-bg: rgba(26, 34, 51, 0.95);
        --btn-gradient: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%);
    }  

    body { 
        margin:0; 
        font-family: 'Inter', -apple-system, sans-serif; 
        background: var(--dark-bg); 
        color: var(--text-white); 
        padding: 15px; 
        padding-bottom: 110px; 
        user-select: none; 
        background-image: radial-gradient(circle at top right, rgba(0, 210, 255, 0.05), transparent), 
                          radial-gradient(circle at bottom left, rgba(58, 123, 213, 0.05), transparent);
        background-attachment: fixed;
    }  
      
    .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); display: none; justify-content: center; align-items: center; z-index: 10000; backdrop-filter: blur(8px); }
    .modal-box { background: var(--card-bg); width: 85%; max-width: 320px; padding: 25px; border-radius: 20px; border: 1px solid var(--primary-glow); text-align: center; box-shadow: 0 0 30px rgba(0, 210, 255, 0.2); animation: zoomIn 0.3s ease; }
    @keyframes zoomIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

    .alert-board { background: rgba(255, 75, 43, 0.1); border: 1px solid var(--accent-red); color: #ff8e7a; padding: 12px; border-radius: 12px; margin-bottom: 15px; font-size: 13px; font-weight: bold; display: none; align-items: center; gap: 10px; }

    .streak-container { display: flex; justify-content: center; margin-bottom: -15px; position: relative; z-index: 10; }  
    .streak-badge {   
        background: linear-gradient(135deg, #ff9d00, #ff5e00);   
        color: white;   
        padding: 8px 20px;   
        border-radius: 50px;   
        font-weight: 800;   
        font-size: 14px;   
        display: flex;   
        align-items: center;   
        gap: 8px;   
        box-shadow: 0 4px 15px rgba(255, 94, 0, 0.4);   
        border: 2px solid rgba(255,255,255,0.2);  
        animation: pulse-glow 2s infinite;  
    }  
    @keyframes pulse-glow { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }  
  
    #captchaCode { font-size: 32px; letter-spacing: 10px; font-weight: bold; color: var(--primary-glow); background: #090c14; padding: 20px; border-radius: 12px; border: 1px dashed var(--secondary-glow); margin: 15px 0; text-align: center; }  
    #captchaInput { text-align: center; font-size: 18px; text-transform: uppercase; letter-spacing: 5px; background: #090c14; border: 1px solid #2d3748; }  
    #captchaTimer { color: var(--warning-yellow); font-weight: bold; font-size: 18px; margin: 10px 0; display: none; }  
  
    .ref-box { background: #090c14; padding: 15px; border-radius: 12px; border: 1px solid #2d3748; font-size: 13px; color: var(--primary-glow); margin: 15px 0; word-break: break-all; }  
    
    .nav-bar { position: fixed; bottom: 15px; left: 15px; right: 15px; background: var(--nav-bg); display: flex; justify-content: space-around; padding: 12px 10px; border-radius: 25px; border: 1px solid rgba(255, 255, 255, 0.08); box-shadow: 0 10px 30px rgba(0,0,0,0.5); z-index: 1000; backdrop-filter: blur(15px); }  
    .nav-item { color: #8b949e; font-size: 11px; text-align: center; flex: 1; transition: 0.3s; font-weight: 500; }  
    .nav-item span { font-size: 22px; display: block; margin-bottom: 2px; }  
    .nav-item.active { color: var(--primary-glow); transform: translateY(-5px); }  
    .nav-item.active span { text-shadow: 0 0 15px var(--primary-glow); }  
  
    .rank-card { background: var(--card-bg); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 15px; padding: 15px; margin-bottom: 10px; display: flex; align-items: center; justify-content: space-between; }  
    .rank-number { width: 32px; height: 32px; border-radius: 50%; background: var(--secondary-glow); display: flex; align-items: center; justify-content: center; font-weight: bold; color: white; margin-right: 15px; }  
    .rank-1 { border: 1px solid var(--warning-yellow); box-shadow: 0 0 10px rgba(249, 212, 35, 0.2); }  
    .rank-1 .rank-number { background: var(--warning-yellow); color: #000; }  
  
    .menu-item { background: var(--card-bg); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; padding: 15px; margin-bottom: 10px; display: flex; align-items: center; justify-content: space-between; cursor: pointer; }  
  
    #auth-page { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--dark-bg); z-index: 5000; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 25px; box-sizing: border-box; }  
    .pass-container { position: relative; width: 100%; }  
    .toggle-pass { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); cursor: pointer; color: var(--primary-glow); font-size: 12px; font-weight: bold; }  
    
    .page { display: none; animation: fadeIn 0.4s ease; }  
    .active-page { display: block; }  
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }  
    
    .card { background: var(--card-bg); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 20px; padding: 25px; text-align: center; margin-bottom: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.2); }  
    .main-bal { font-size: 48px; font-weight: 900; background: var(--btn-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 15px 0; }  
    
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }  
    .grid-item { background: rgba(26, 34, 51, 0.7); border: 1px solid rgba(0, 210, 255, 0.1); border-radius: 18px; padding: 18px; text-align: center; }  
    .grid-item span { font-size: 12px; color: #8b949e; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }  
    .grid-item p { margin: 8px 0 0; font-size: 22px; font-weight: 800; color: var(--primary-glow); }  
    
    .btn { background: var(--btn-gradient); color: #fff; border: none; padding: 16px; border-radius: 15px; width: 100%; font-size: 16px; font-weight: 700; cursor: pointer; margin-top: 10px; box-shadow: 0 4px 15px rgba(58, 123, 213, 0.3); transition: 0.2s; }  
    .btn:active { transform: scale(0.96); }
    .btn:disabled { background: #2d3748 !important; opacity: 0.6; box-shadow: none; }  
    .btn-bonus { background: linear-gradient(135deg, #00f2fe 0%, #4facfe 100%); }  
    
    input, select { width: 100%; padding: 14px; margin: 10px 0; background: #090c14; border: 1px solid #2d3748; color: white; border-radius: 12px; font-size: 15px; }
    input:focus { border-color: var(--primary-glow); outline: none; }
    .hist-item { background: var(--card-bg); padding: 15px; border-radius: 15px; margin-bottom: 10px; border-left: 4px solid var(--primary-glow); display: flex; justify-content: space-between; align-items: center; }  
    .timer-display { font-family: 'Monaco', monospace; font-size: 30px; font-weight: bold; color: var(--success-green); text-shadow: 0 0 15px rgba(0, 242, 254, 0.3); }  
    .notice-box { background: rgba(249, 212, 35, 0.08); border: 1px solid var(--warning-yellow); color: #ffe694; padding: 15px; border-radius: 15px; margin-bottom: 20px; font-size: 14px; }  
</style>  
</head>    
<body>    
    <div id="popupModal" class="modal-overlay">
        <div class="modal-box">
            <h3 style="color: var(--primary-glow); margin-top: 0;">üì¢ New Update</h3>
            <p id="popupText" style="font-size: 14px; line-height: 1.5; color: var(--text-white);"></p>
            <button class="btn" onclick="closePopup()">OK, I UNDERSTAND</button>
        </div>
    </div>

    <div id="ban-page" style="display:none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 20px; color: white;">  
        <h1 style="color:var(--accent-red); font-size: 40px;">üö´ BANNED</h1>  
        <p style="margin: 20px 0;">‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶á‡¶®‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶° ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶æ‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§</p>  
        <button class="btn" onclick="window.open('https://t.me/lite_income')">Contact Admin</button>  
    </div>  

    <div id="vpn-page" style="display:none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 20px; color: white;">  
        <h1 style="color:var(--warning-yellow); font-size: 40px;">‚ö†Ô∏è VPN DETECTED</h1>  
        <p style="margin: 20px 0;">‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ‡¶∞ ‡¶ñ‡¶æ‡¶§‡¶ø‡¶∞‡ßá ‡¶≠‡¶ø‡¶™‡¶ø‡¶è‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ö‡¶æ‡¶≤‡¶æ‡¶®‡ßã ‡¶®‡¶ø‡¶∑‡ßá‡¶ß‡•§ ‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶≠‡¶ø‡¶™‡¶ø‡¶è‡¶® ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßá ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡ßü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>  
        <button class="btn" onclick="location.reload()">Retry Now</button>  
    </div>  

<div id="auth-page">    
    <div class="card" style="width: 100%; max-width: 400px; border: 1px solid var(--primary-glow);">    
        <h2 id="auth-title" style="color: var(--primary-glow); margin-bottom: 20px;">Login</h2>    
        <input type="email" id="auth-email" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤">    
        <div class="pass-container">    
            <input type="password" id="auth-pass" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°">    
            <span class="toggle-pass" onclick="togglePassword()">SHOW</span>    
        </div>    
        <button class="btn" id="auth-btn" onclick="handleAuth()">Login Now</button>    
        <p id="auth-toggle-text" style="font-size: 14px; margin-top: 20px;">Account ‡¶®‡ßá‡¶á? <span style="color: var(--primary-glow); cursor: pointer; font-weight:bold;" onclick="toggleAuth()">Sign Up ‡¶ï‡¶∞‡ßÅ‡¶®</span></p>    
    </div>    
</div>    

<div id="main-content" style="display: none;">    
    <div id="home" class="page active-page">    
        <div id="alert-board" class="alert-board"><span>‚ö†Ô∏è</span><span id="alertText">Important Alert Message...</span></div>
        <div id="notice-container" class="notice-box">Loading notice...</div>  
        <div class="streak-container"><div class="streak-badge"><span>üî•</span><span class="streak-text"><span id="hStreak">0</span> ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶ï</span></div></div>  
        <div class="card" style="padding-top: 35px;"><h4 id="uName" style="color: #8b949e; margin: 0;">‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ!</h4><div class="main-bal" id="hBal">$0.000</div><p id="hInvalidUI" style="color:var(--accent-red); font-size:14px; font-weight:bold; margin:0; opacity: 0.8;">Invalid Click: 0 / 5</p></div>    
        <div class="grid"><div class="grid-item"><span>‡¶ü‡ßÅ‡¶°‡ßá ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï</span><p id="hTaskAvail">0</p></div><div class="grid-item"><span>‡¶∏‡¶´‡¶≤ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞</span><p id="hRefCount">0</p></div><div class="grid-item" style="grid-column: span 2;"><span>‡¶ü‡ßã‡¶ü‡¶æ‡¶≤ ‡¶è‡¶° ‡¶≠‡¶ø‡¶â</span><p id="hCompleteAds">0 / 0</p></div></div>    
        <h3 style="margin: 25px 0 15px; text-align:left; border-left:4px solid var(--success-green); padding-left:12px; font-size: 18px;">‡¶°‡ßá‡¶á‡¶≤‡¶ø ‡¶è‡¶ï‡ßç‡¶ü‡¶ø‡¶≠‡¶ø‡¶ü‡¶ø</h3>  
        <div id="dailyActivityList" class="hist-list"></div>  
    </div>    

    <div id="rank" class="page"><h3 style="text-align: center; color: var(--primary-glow); margin-bottom: 20px;">üèÜ Top 10 Earners</h3><div id="leaderboardList"></div></div>  

    <div id="task" class="page">    
        <div class="card" style="padding: 15px;">‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: <b id="tBal" style="color:var(--primary-glow)">$0.000</b></div>    
        <div class="card" style="background:#090c14; border: 1px dashed var(--primary-glow);"><div style="font-size:12px; color:#8b949e; margin-bottom:8px; font-weight: bold; letter-spacing: 1px;">NEXT TASK IN</div><div class="timer-display" id="main-timer">00:00:00</div></div>  
        <button id="dailyBtn" class="btn btn-bonus" onclick="claimDailyBonus()">Daily Bonus</button>    
        <button id="openCaptchaBtn" class="btn" style="margin-top:15px;" onclick="openCaptcha()">ü§ñ Play Captcha Entry</button>  
        <div id="captchaPanel" class="card" style="display:none; margin-top:15px; background: #090c14; border: 2px solid var(--primary-glow);"><span style="font-weight: bold; color: var(--primary-glow);">ü§ñ Verify Captcha</span><div id="captchaCode">GENERATING...</div><div id="captchaTimer">Next in: 00s</div><input type="text" id="captchaInput" placeholder="‡¶ü‡¶æ‡¶á‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®"><p id="sLimit" style="font-size: 13px; color: #8b949e; margin: 10px 0;">Tasks: 0 / 0</p><button id="captchaBtn" class="btn" onclick="verifyCaptcha()">SUBMIT CAPTCHA</button><button class="btn" style="background:transparent; border:1px solid #4a5568; font-size:12px; margin-top: 15px;" onclick="document.getElementById('captchaPanel').style.display='none'; document.getElementById('openCaptchaBtn').style.display='block'">Close</button></div>  
        <div class="card" style="margin-top:20px; border-style:dashed; border-color: #4a5568;"><button id="adBtn" class="btn" onclick="playAd()">Watch Ad</button><p id="tLimit" style="margin-top:15px; color: #8b949e; font-size: 14px;">Ads: 0 / 0</p></div>    
    </div>    

    <div id="withdraw" class="page"><div class="card"><span style="font-size: 14px; color: #8b949e;">‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: <b id="wBal" style="color:var(--primary-glow); font-size: 20px;">$0.000</b></span><br><small id="minWithdrawText" style="color: var(--warning-yellow); display: block; margin-top: 10px; font-weight: bold;">‡¶Æ‡¶ø‡¶®‡¶ø‡¶Æ‡¶æ‡¶Æ ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞: $0.00</small><small id="minReferText" style="color: var(--primary-glow); display: block; margin-top: 4px;">‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡ßÄ‡ßü ‡¶∞‡ßá‡¶´‡¶æ‡¶∞: ‡ß¶</small><select id="wMethod"><option>bKash</option><option>Nagad</option><option>Recharge</option></select><input id="wNumber" placeholder="‡¶®‡¶Æ‡ßç‡¶¨‡¶∞"><input id="wAmount" type="number" placeholder="‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ($)"><button class="btn" onclick="requestWithdraw()">Request Withdraw</button></div><h3 style="padding-left:12px; border-left:4px solid var(--primary-glow); font-size: 18px; margin-bottom: 15px;">‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø</h3><div class="hist-list" id="withdrawHistoryList"></div></div>    

    <div id="profile" class="page"><div class="card"><h3 style="color:var(--primary-glow); margin: 0 0 5px 0;">‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</h3><p id="pEmail" style="color:#8b949e; font-size: 14px; margin-bottom:20px;"></p><div class="ref-box" id="refLinkText" style="font-weight:bold;">‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div><div style="display: flex; gap: 12px;"><button class="btn" onclick="copyRef()" style="padding:12px; font-size:13px; flex: 1;">Copy Link</button><button class="btn" onclick="shareOnTelegram()" style="padding:12px; font-size:13px; flex: 1; background: #229ED9;">Share Telegram</button></div></div><div class="menu-item" onclick="window.open('https://t.me/lite_income_bot')" style="border: 1px solid var(--success-green);"><span>ü§ñ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ / ‡¶¨‡¶ü</span><span style="color: var(--success-green);">‚ûî</span></div><div class="menu-item" onclick="window.open('https://t.me/lite_income_app')"><span>üéß ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ (Telegram)</span><span style="color: var(--primary-glow);">‚ûî</span></div><div class="menu-item" onclick="window.open('https://t.me/lite_income')"><span>üí¨ ‡¶ï‡¶®‡ßç‡¶ü‡¶æ‡¶ï‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®</span><span style="color: var(--primary-glow);">‚ûî</span></div><button class="btn" style="background:var(--accent-red); margin-top:25px;" onclick="logout()">Logout</button></div>  
</div>  

<div class="nav-bar">    
    <div class="nav-item active" onclick="showPage('home', this)"><span>üè†</span>Home</div>    
    <div class="nav-item" onclick="showPage('rank', this)"><span>üèÜ</span>Rank</div>   
    <div class="nav-item" onclick="showPage('task', this)"><span>üéØ</span>Task</div>    
    <div class="nav-item" onclick="showPage('withdraw', this)"><span>üí∞</span>Withdraw</div>    
    <div class="nav-item" onclick="showPage('profile', this)"><span>üë§</span>Profile</div>    
</div>

<script>  
    const tg = window.Telegram.WebApp; tg.expand();  
    const firebaseConfig = { apiKey: "AIzaSyD_umGq2C78hRinwHGl9SNVFuZzb12iooc", databaseURL: "https://lite-income-f6287-default-rtdb.firebaseio.com/", projectId: "lite-income-f6287" };  
    firebase.initializeApp(firebaseConfig); const db = firebase.database();  
  
    let appConfig = { adLimit: 15, cooldownMins: 720, referReward: 0.10, dailyBonus: 0.05, notice: "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ!", minWithdraw: 1.00, minReferLimit: 0, adReward: 0.005, spinLimit: 10, spinReward: 0.003, spinCooldownSec: 60, popupNotice: "", alertNotice: "" };  
    let userData = { uid: "", balance: 0.00, ads: 0, spins: 0, lastSpinTime: 0, lastAdTime: 0, taskLockTime: 0, lastDaily: 0, history: [], dailyActivity: {}, referCount: 0, email: "", password: "", status: "Active", invalidClicks: 0, streak: 0, lastActive: 0 };  
  
    function getReferrerId() {  
        const urlParams = new URLSearchParams(window.location.search);  
        let startParam = urlParams.get('tgWebAppStartParam') || urlParams.get('startapp');  
        if (!startParam && tg.initDataUnsafe && tg.initDataUnsafe.start_param) { startParam = tg.initDataUnsafe.start_param; }  
        return startParam;  
    }  
  
    async function detectVPN() { try { return Intl.DateTimeFormat().resolvedOptions().timeZone !== "Asia/Dhaka"; } catch (e) { return false; } }  
  
    async function initApp() {  
        if (await detectVPN()) { document.getElementById('vpn-page').style.display = 'flex'; return; }  
        const savedUid = localStorage.getItem('lite_user_id');  
        if(savedUid) db.ref('users/' + savedUid).once('value', snap => { if(snap.exists()) { userData = snap.val(); loginSuccess(); } });  
    }  
    initApp();  
  
    db.ref('app_config').on('value', snap => {  
        if(snap.exists()) {  
            appConfig = {...appConfig, ...snap.val()};  
            document.getElementById('notice-container').innerText = appConfig.notice;  
            document.getElementById('minWithdrawText').innerText = "‡¶Æ‡¶ø‡¶®‡¶ø‡¶Æ‡¶æ‡¶Æ ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞: $" + (parseFloat(appConfig.minWithdraw) || 1.00).toFixed(2);  
            document.getElementById('minReferText').innerText = "‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡ßÄ‡ßü ‡¶∞‡ßá‡¶´‡¶æ‡¶∞: " + (parseInt(appConfig.minReferLimit) || 0) + " ‡¶ü‡¶ø";  
            if(appConfig.alertNotice) { document.getElementById('alertText').innerText = appConfig.alertNotice; document.getElementById('alert-board').style.display = 'flex'; }
            if(appConfig.popupNotice && !sessionStorage.getItem('popupShown')) { document.getElementById('popupText').innerText = appConfig.popupNotice; document.getElementById('popupModal').style.display = 'flex'; sessionStorage.setItem('popupShown', 'true'); }
            updateUI();  
        }  
    });  

    function closePopup() { document.getElementById('popupModal').style.display = 'none'; }
  
    function handleAuth() {  
        const email = document.getElementById('auth-email').value.trim(), pass = document.getElementById('auth-pass').value.trim(), mode = document.getElementById('auth-title').innerText;  
        if (!email || !pass) return alert("‡¶∏‡¶¨ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®!");  
        const uid = btoa(email).replace(/[^a-zA-Z0-9]/g, "").substring(0, 15);  
        if (mode === "Sign Up") {  
            db.ref('users/' + uid).once('value', snap => {  
                if (snap.exists()) alert("‡¶è‡¶á ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¶‡¶ø‡ßü‡ßá ‡¶Ö‡¶≤‡¶∞‡ßá‡¶°‡¶ø ‡¶è‡¶ï‡¶æ‡¶ì‡¶®‡ßç‡¶ü ‡¶ñ‡ßã‡¶≤‡¶æ ‡¶Ü‡¶õ‡ßá!");  
                else {  
                    const newUserData = { uid: uid, email: email, password: pass, balance: 0.00, ads: 0, spins: 0, referCount: 0, status: "Active", invalidClicks: 0, streak: 1, lastActive: Date.now(), lastDaily: 0 };  
                    db.ref('users/' + uid).set(newUserData).then(() => {  
                        const refBy = getReferrerId();  
                        if(refBy && refBy !== uid) {  
                            const reward = parseFloat(appConfig.referReward) || 0.10;
                            db.ref('users/' + refBy).transaction((user) => {
                                if (user) { user.balance = (parseFloat(user.balance) || 0) + reward; user.referCount = (parseInt(user.referCount) || 0) + 1; }
                                return user;
                            });
                            db.ref('refer_history').push({ referrer: refBy, referred: uid, email: email, amount: reward, date: new Date().toLocaleString() });
                        }
                        alert("‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶∏‡¶´‡¶≤! ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§"); toggleAuth();  
                    });  
                }  
            });  
        } else {  
            db.ref('users/' + uid).once('value', snap => {  
                if (snap.exists() && snap.val().password === pass) { userData = snap.val(); localStorage.setItem('lite_user_id', uid); loginSuccess(); } else alert("‡¶≠‡ßÅ‡¶≤ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¨‡¶æ ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°!");  
            });  
        }  
    }  
  
    function loginSuccess() {  
        document.getElementById('auth-page').style.display = 'none';  
        db.ref('users/' + userData.uid).on('value', snap => { if(snap.exists()) { userData = snap.val(); if(userData.status === "Banned") { document.getElementById('main-content').style.display = 'none'; document.getElementById('ban-page').style.display = 'flex'; } else { document.getElementById('main-content').style.display = 'block'; updateUI(); } } });  
        checkStreak(); fetchWithdrawHistory(); fetchLeaderboard();  
    }  
  
    function checkStreak() {  
        const now = new Date(); const lastActive = new Date(userData.lastActive || 0);  
        const diffInDays = Math.floor((now.getTime() - lastActive.getTime()) / (1000 * 3600 * 24));  
        if (diffInDays === 1) db.ref('users/' + userData.uid).update({ streak: (userData.streak || 0) + 1, lastActive: Date.now() });  
        else if (diffInDays > 1) db.ref('users/' + userData.uid).update({ streak: 1, lastActive: Date.now() });  
    }  
  
    function updateUI() {  
        if(!userData.uid) return;  
        const bal = (parseFloat(userData.balance) || 0).toFixed(3);  
        document.getElementById('hBal').innerText = "$" + bal;  
        document.getElementById('tBal').innerText = "$" + bal;  
        document.getElementById('wBal').innerText = "$" + bal;  
        document.getElementById('pEmail').innerText = userData.email;  
        document.getElementById('hStreak').innerText = userData.streak || 0;  
        document.getElementById('hRefCount').innerText = userData.referCount || 0;  
        document.getElementById('hInvalidUI').innerText = "Invalid Click: " + (userData.invalidClicks || 0) + " / 5";  
        document.getElementById('hCompleteAds').innerText = userData.ads + " / " + appConfig.adLimit;  
        document.getElementById('tLimit').innerText = "Ads: " + userData.ads + " / " + appConfig.adLimit;  
        document.getElementById('sLimit').innerText = "Tasks: " + userData.spins + " / " + appConfig.spinLimit;  
        document.getElementById('refLinkText').innerText = "Refer ID: " + userData.uid;  
        const dBtn = document.getElementById('dailyBtn');  
        if (new Date().toDateString() === new Date(userData.lastDaily || 0).toDateString()) { dBtn.disabled = true; dBtn.innerText = "Claimed"; } else { dBtn.disabled = false; dBtn.innerText = "Daily Bonus"; }  
        checkCooldowns(); renderDailyActivity(); handleCaptchaCooldownUI();  
    }  
  
    let currentCaptcha = ""; let captchaInterval;  
    function openCaptcha() { document.getElementById('captchaPanel').style.display = 'block'; document.getElementById('openCaptchaBtn').style.display = 'none'; generateNewCaptcha(); }  
    function generateNewCaptcha() {  
        const chars = "0123456789ABCDEFGHJKLMNPQRSTUVWXYZ"; let result = "";  
        for (let i = 0; i < 6; i++) { result += chars.charAt(Math.floor(Math.random() * chars.length)); }  
        currentCaptcha = result; document.getElementById('captchaCode').innerText = result; document.getElementById('captchaInput').value = "";  
    }  
    function handleCaptchaCooldownUI() {  
        const timerText = document.getElementById('captchaTimer'), captchaBtn = document.getElementById('captchaBtn');  
        const cooldown = (parseInt(appConfig.spinCooldownSec) || 60) * 1000; const diff = (userData.lastSpinTime || 0) + cooldown - Date.now();  
        if (diff > 0) {  
            captchaBtn.disabled = true; timerText.style.display = "block";  
            if (captchaInterval) clearInterval(captchaInterval);  
            captchaInterval = setInterval(() => {  
                const rem = Math.ceil(((userData.lastSpinTime || 0) + cooldown - Date.now()) / 1000);  
                if (rem <= 0) { clearInterval(captchaInterval); timerText.style.display = "none"; captchaBtn.disabled = false; generateNewCaptcha(); } else { timerText.innerText = `Next in: ${rem}s`; }  
            }, 1000);  
        } else { captchaBtn.disabled = false; timerText.style.display = "none"; }  
    }  
    function verifyCaptcha() {  
        const input = document.getElementById('captchaInput').value.trim().toUpperCase();  
        if (userData.spins >= appConfig.spinLimit) return alert("‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶∂‡ßá‡¶∑!");  
        if (input !== currentCaptcha) { alert("‡¶≠‡ßÅ‡¶≤ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶™‡¶ö‡¶æ!"); generateNewCaptcha(); return; }  
        if (typeof show_10411839 === 'function') { show_10411839().then(() => { processCaptchaReward(); }).catch(() => alert("‡¶è‡¶° ‡¶≤‡ßã‡¶° ‡¶π‡ßü‡¶®‡¶ø")); } else { processCaptchaReward(); }  
    }  
    function processCaptchaReward() {  
        const today = new Date().toDateString(); let act = userData.dailyActivity || {};  
        if(!act[today]) act[today] = { ads: 0, income: 0, bonus: 0 };  
        let rew = parseFloat(appConfig.spinReward) || 0.003; act[today].income += rew;  
        db.ref('users/' + userData.uid).update({ balance: (parseFloat(userData.balance) + rew), spins: (parseInt(userData.spins) || 0) + 1, lastSpinTime: Date.now(), dailyActivity: act, lastActive: Date.now() });  
    }  
    function playAd() {   
        if (userData.ads >= appConfig.adLimit) return alert("Limit Over!");   
        if (typeof show_10411839 === 'function') {   
            document.getElementById('adBtn').disabled = true;  
            show_10411839().then(() => {   
                const today = new Date().toDateString(); let act = userData.dailyActivity || {};   
                if(!act[today]) act[today] = { ads: 0, income: 0, bonus: 0 };   
                let adRew = parseFloat(appConfig.adReward) || 0.005;   
                act[today].ads += 1; act[today].income += adRew;  
                let up = { balance: (parseFloat(userData.balance) + adRew), ads: (parseInt(userData.ads) + 1), lastAdTime: Date.now(), dailyActivity: act, lastActive: Date.now() };   
                if (up.ads >= appConfig.adLimit) up.taskLockTime = Date.now() + (appConfig.cooldownMins * 60000);   
                db.ref('users/' + userData.uid).update(up);  
            }).catch(() => document.getElementById('adBtn').disabled = false);   
        }   
    }  
    function requestWithdraw() {   
        const amt = parseFloat(document.getElementById('wAmount').value), method = document.getElementById('wMethod').value, num = document.getElementById('wNumber').value;   
        if(!num || isNaN(amt)) return alert("‡¶∏‡¶¨ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®!"); if(userData.referCount < appConfig.minReferLimit) return alert("‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá " + appConfig.minReferLimit + " ‡¶ü‡¶ø ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®!");  
        if(amt < appConfig.minWithdraw) return alert("‡¶Æ‡¶ø‡¶®‡¶ø‡¶Æ‡¶æ‡¶Æ $" + appConfig.minWithdraw); if(amt > userData.balance) return alert("‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á!");   
        db.ref('withdraws').push({ uid: userData.uid, email: userData.email, amount: amt, method: method, number: num, status: "Pending", date: new Date().toLocaleString() }).then(() => {   
            db.ref('users/' + userData.uid).update({ balance: (parseFloat(userData.balance) - amt) }); alert("‡¶∏‡¶´‡¶≤ ‡¶π‡ßü‡ßá‡¶õ‡ßá!");   
        });   
    }  
    function fetchLeaderboard() {  
        db.ref('users').orderByChild('balance').limitToLast(10).on('value', snap => {  
            let html = ""; let users = []; snap.forEach(c => users.push(c.val()));  
            users.reverse().forEach((u, i) => { html += `<div class="rank-card ${i === 0 ? "rank-1" : ""}"><div style="display:flex;align-items:center;"><div class="rank-number">${i+1}</div><div><div style="font-weight:bold;font-size:14px;">${u.email.split('@')[0]}</div></div></div><div style="font-weight:bold;color:var(--primary-glow)">$${(u.balance||0).toFixed(3)}</div></div>`; });  
            document.getElementById('leaderboardList').innerHTML = html;  
        });  
    }  
    function fetchWithdrawHistory() { db.ref('withdraws').orderByChild('email').equalTo(userData.email).on('value', snap => { let html = ""; if(!snap.exists()) { document.getElementById('withdrawHistoryList').innerHTML = "No History"; return; } snap.forEach(c => { const w = c.val(); let color = w.status === 'Paid' ? '#00f2fe' : (w.status === 'Rejected' ? '#ff4b2b' : '#f9d423'); html += `<div class="hist-item"><div><b>${w.method}</b><br><small>${w.date}</small></div><div style="color:${color}; font-weight:bold;">$${w.amount.toFixed(3)} - ${w.status}</div></div>`; }); document.getElementById('withdrawHistoryList').innerHTML = html; }); }  
    function renderDailyActivity() {   
        if (!userData.dailyActivity) return;  
        const sorted = Object.keys(userData.dailyActivity).reverse();  
        document.getElementById('dailyActivityList').innerHTML = sorted.slice(0, 5).map(date => { const d = userData.dailyActivity[date]; return `<div class="hist-item"><div><b>${date}</b><br><small>Ads: ${d.ads || 0}</small></div><div style="color:var(--success-green); font-weight:bold;">+$${(d.income || 0).toFixed(3)}</div></div>`; }).join('');  
    }  
    function checkCooldowns() { const now = Date.now(); if (userData.taskLockTime && now < userData.taskLockTime) { document.getElementById('adBtn').disabled = true; startTaskCountdown(userData.taskLockTime); } else { if(userData.taskLockTime) db.ref('users/' + userData.uid).update({ ads: 0, spins: 0, taskLockTime: 0 }); document.getElementById('adBtn').disabled = false; document.getElementById('main-timer').innerText = "00:00:00"; } }  
    function startTaskCountdown(lock) { if(window.taskInterval) clearInterval(window.taskInterval); window.taskInterval = setInterval(() => { const diff = lock - Date.now(); if (diff <= 0) { clearInterval(window.taskInterval); updateUI(); return; } const h = Math.floor(diff/3600000), m = Math.floor((diff%3600000)/60000), s = Math.floor((diff%60000)/1000); document.getElementById('main-timer').innerText = `${h<10?'0'+h:h}:${m<10?'0'+m:m}:${s<10?'0'+s:s}`; }, 1000); }  
    function claimDailyBonus() { if (typeof show_10411839 === 'function') { show_10411839().then(() => { db.ref('users/' + userData.uid).update({ balance: (parseFloat(userData.balance) + parseFloat(appConfig.dailyBonus)), lastDaily: Date.now(), lastActive: Date.now() }); }); } }  
    function copyRef() { const link = `https://t.me/lite_income_bot/app?startapp=${userData.uid}`; navigator.clipboard.writeText(link); alert("‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá!"); }  
    function shareOnTelegram() { const link = `https://t.me/lite_income_bot/app?startapp=${userData.uid}`; const text = encodeURIComponent("üî• Lite Income ‡¶è ‡¶Ü‡ßü ‡¶ï‡¶∞‡ßÅ‡¶®!\n\n‡¶≤‡¶ø‡¶ô‡ßç‡¶ï: "); window.open(`https://t.me/share/url?url=${encodeURIComponent(link)}&text=${text}`, '_blank'); }  
    function logout() { localStorage.clear(); location.reload(); }  
    function togglePassword() { const p = document.getElementById('auth-pass'); p.type = p.type === "password" ? "text" : "password"; }  
    function toggleAuth() { const t = document.getElementById('auth-title'), b = document.getElementById('auth-btn'), x = document.getElementById('auth-toggle-text'); if (t.innerText === "Login") { t.innerText = "Sign Up"; b.innerText = "Register Now"; x.innerHTML = 'Account ‡¶Ü‡¶õ‡ßá? <span style="color: var(--primary-glow); cursor: pointer;" onclick="toggleAuth()">Login ‡¶ï‡¶∞‡ßÅ‡¶®</span>'; } else { t.innerText = "Login"; b.innerText = "Login Now"; x.innerHTML = 'Account ‡¶®‡ßá‡¶á? <span style="color: var(--primary-glow); cursor: pointer;" onclick="toggleAuth()">Sign Up ‡¶ï‡¶∞‡ßÅ‡¶®</span>'; } }  
    function showPage(id, el) { document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page')); document.getElementById(id).classList.add('active-page'); if(el) { document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active')); el.classList.add('active'); } if(id === 'rank') fetchLeaderboard(); }  
</script>  
</body>  
                                                                                                                                                                                                                                                                                                                                                         </html>
